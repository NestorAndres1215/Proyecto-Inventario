<div class="container">
  <h1><i class="fas fa-sign-out-alt"></i> Registro de Salida de Producto</h1>
  <hr />

  <form class="form-grid" [formGroup]="salidaForm" (ngSubmit)="enviarSalida()">

    <mat-form-field appearance="outline" *ngIf="isLoggedIn && user">
      <mat-label><i class="fas fa-user"></i> Usuario</mat-label>
      <input matInput disabled [value]="user.username" />
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label><i class="fas fa-sort-numeric-up"></i> Cantidad</mat-label>
      <input matInput type="number" formControlName="cantidad" />
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label><i class="fas fa-box"></i> Producto</mat-label>
      <mat-select formControlName="productoId">
        <mat-option *ngFor="let prod of producto" [value]="prod.productoId">
          {{ prod.nombre }}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label><i class="fas fa-file-alt"></i> Descripción</mat-label>
      <input matInput formControlName="descripcion" />
    </mat-form-field>

    <mat-form-field appearance="outline" style="grid-column: span 2">
      <mat-label><i class="fas fa-calendar-alt"></i> Fecha de Salida</mat-label>
      <input matInput type="date" formControlName="fechaSalida" />
    </mat-form-field>

    <div class="form-buttons">
      <button type="submit" class="btn-action">
        <i class="fas fa-save"></i> Registrar Salida
      </button>
      <button type="button" class="btn-action" (click)="agregarProducto()">
        <i class="fas fa-plus-circle"></i> Agregar Registro
      </button>
    </div>

  </form>

  <div>
    <table class="table" *ngIf="listaDetalleSalida.length > 0">
      <thead>
        <tr>
          <th><i class="fas fa-file-alt"></i> Descripción</th>
          <th><i class="fas fa-sort-numeric-up"></i> Cantidad</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let detalle of listaDetalleSalida">
          <td>{{ detalle.descripcion }}</td>
          <td>{{ detalle.cantidad }}</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
